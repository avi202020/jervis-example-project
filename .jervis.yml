language: groovy


script: ./gradlew clean check cobertura groovydoc Jar


#matrix build across different versions of Groovy
env: GROOVY_VERSION="1.8.9"


#filter branches which should be automatically built
branches:
  only:
    - master
    - /^release-.*$/
  except:
    - release-1.2
    - /^.*-pre$/

#collect build artifacts
jenkins:
  stash:
    - name: artifacts
      allow_empty: true
  collect:
    artifacts:
      path: build/libs/*.jar
      allowEmptyArchive: true
    cobertura: build/reports/cobertura/coverage.xml
    junit: build/test-results/**/*.xml
